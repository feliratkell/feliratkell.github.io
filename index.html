<!-- index.html -->
<!DOCTYPE html>
<html lang="hu">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Felirat látványtervező</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <div id="app">
    <aside class="sidebar">
      <h1 class="app-title">Felirat látványtervező</h1>

      <section class="panel-section">
        <h2>Fal háttér</h2>

        <label class="field-label" for="wall-select">Szín</label>
        <select id="wall-select" class="select">
          <option value="white">Fehér</option>
          <option value="beige">Bézs (RAL 1001)</option>
          <option value="gray">Szürke</option>
          <option value="green">Zöld</option>
          <option value="pink">Rózsaszín (RAL 3015)</option>
        </select>

        <div class="hint-text">
          Fix háttérképek az assets/backgrounds/ mappából. Nincs maszkolás, nincs overlay, nincs canvas.
        </div>
      </section>

      <section class="panel-section">
        <h2>Zoom / Pan</h2>

        <label class="field-label" for="zoom-range">Zoom (1× – 3×)</label>
        <input id="zoom-range" class="range" type="range" min="1" max="3" step="0.1" value="1" />
        <div class="mini" style="margin-top:8px;">
          <div class="mini-label">Aktuális zoom</div>
          <div class="mini-value"><span id="zoom-out">1.0</span>×</div>
        </div>

        <button id="zoom-reset-btn" class="secondary-btn" type="button" style="margin-top:10px;">
          Reset (zoom + pan)
        </button>

        <div class="hint-text">
          Pan csak akkor működik, ha a zoom &gt; 1 (üres falon fogd meg és húzd).
        </div>
      </section>

      <section class="panel-section">
        <h2>Kalibráció (komód = 70 cm)</h2>

        <button id="calib-toggle-btn" class="secondary-btn" type="button">
          Kalibrálás indítása
        </button>

        <div class="hint-text">
          Húzd a <b>felső</b> jelölőt a komód tetejére, az <b>alsót</b> a komód aljára, majd „Mentés”.
          <br />Alapesetben a jelölők rejtve vannak, exportban sosem látszanak.
        </div>

        <div class="field-row" style="margin-top:10px;">
          <button id="calib-save-btn" class="primary-btn" type="button" style="margin:0; display:none;">
            Kalibráció mentése
          </button>
          <button id="calib-cancel-btn" class="secondary-btn" type="button" style="display:none;">
            Mégse
          </button>
        </div>

        <div class="mini" style="margin-top:10px;">
          <div class="mini-label">Skála</div>
          <div class="mini-value"><span id="scale-out">—</span> px / cm</div>
        </div>
      </section>

      <section class="panel-section">
        <h2>Anyag</h2>

        <label class="radio-row">
          <input type="radio" name="material" value="birch" checked />
          <span>Natúr nyír rétegelt (4 mm)</span>
        </label>

        <label class="radio-row">
          <input type="radio" name="material" value="hdf" />
          <span>Fehér HDF (3 mm)</span>
        </label>

        <div class="hint-text">
          Felirat = anyaghatás (nem gravír). Ikonok = gravír (nyíren barnás, HDF-en sötétszürke).
        </div>
      </section>

      <section class="panel-section">
        <h2>Felirat</h2>

        <label class="field-label" for="template-select">Sablonok</label>
        <select id="template-select" class="select">
          <option value="">– válassz sablont –</option>
          <option value="Egyszer volt, hol nem volt …">Egyszer volt, hol nem volt …</option>
          <option value="Kis lépések, nagy csodák">Kis lépések, nagy csodák</option>
          <option value="Álmodj nagyot kisfiam!">Álmodj nagyot kisfiam!</option>
          <option value="Álmodj nagyot kislányom!">Álmodj nagyot kislányom!</option>
        </select>

        <label class="field-label" for="title-input">Szöveg</label>
        <textarea id="title-input" placeholder="Írd ide a feliratot..." rows="2"></textarea>

        <label class="field-label" for="title-size-range" style="margin-top:8px;">Betűmagasság (valós) 3–11 cm</label>
        <input id="title-size-range" class="range" type="range" min="3" max="11" step="0.1" value="11" />
        <div class="mini" style="margin-top:8px;">
          <div class="mini-label">Betűmagasság</div>
          <div class="mini-value"><span id="title-letter-cm-out">11.0</span> cm</div>
        </div>

        <div class="field-row" style="margin-top:10px;">
          <div class="mini">
            <div class="mini-label">Felirat teljes magasság (valós)</div>
            <div class="mini-value"><span id="title-size">—</span> cm</div>
          </div>
          <button id="center-title-btn" class="secondary-btn" type="button">
            Középre
          </button>
        </div>

        <div class="hint-text">
          Többsoros: Enter engedett. A felirat húzható. Zoomnál nem eshet szét / nem lehet áttetsző.
        </div>
      </section>

      <section class="panel-section">
        <h2>Dekor ikonok</h2>

        <div class="pattern-category collapsed">
          <button class="pattern-category-header" type="button">
            <span>Ludas</span>
            <span class="pattern-category-arrow">▾</span>
          </button>
          <div class="pattern-category-body">
            <div class="pattern-grid">
              <button class="pattern-btn" type="button" data-src="icons/ludas/kis_lud.svg" data-alt="Kis lud">
                <img src="icons/ludas/kis_lud.svg" alt="Kis lud" />
              </button>
              <button class="pattern-btn" type="button" data-src="icons/ludas/nagy_lud.svg" data-alt="Nagy lud">
                <img src="icons/ludas/nagy_lud.svg" alt="Nagy lud" />
              </button>
            </div>
          </div>
        </div>

        <button id="delete-btn" class="secondary-btn" type="button">
          Kijelölt törlése
        </button>

        <div class="hint-text">
          Tipp: Del / Backspace törlés, Ctrl+C / Ctrl+V másolás.
        </div>
      </section>

      <section class="panel-section">
        <h2>Mentés</h2>
        <button id="export-btn" class="primary-btn" type="button">PNG export</button>
        <button id="export-csv-btn" class="secondary-btn" type="button">CSV méretlista</button>
        <div class="hint-text">
          Exportnál a kalibráció és kijelölés nem látszik. (Render: 3×)
        </div>
      </section>
    </aside>

    <main class="workspace">
      <div class="workspace-inner">
        <div id="canvas-wrapper">
          <div id="canvas-viewport" aria-label="Látványterv">
            <div id="canvas">
              <div id="wall-layer"></div>

              <!-- Kalibráció overlay (alapesetben rejtve, exportnál sem látszik) -->
              <div id="calibration-layer" aria-hidden="true">
                <div id="calib-top" class="calib-handle" title="Komód teteje"></div>
                <div id="calib-bottom" class="calib-handle" title="Komód alja"></div>
              </div>

              <div id="items-layer">
                <!-- FELIRAT -->
                <div id="title-item" class="item title-item" tabindex="0" aria-label="Felirat">
                  <svg id="title-svg" class="title-svg" xmlns="http://www.w3.org/2000/svg">
                    <defs>
                      <pattern id="title-pattern" patternUnits="userSpaceOnUse">
                        <image id="title-pattern-image" href="" x="0" y="0" width="10" height="10" preserveAspectRatio="none"></image>
                      </pattern>
                    </defs>
                    <text id="title-svg-text" text-anchor="middle" dominant-baseline="hanging"></text>
                  </svg>
                </div>
                <!-- ikonok ide jönnek -->
              </div>
            </div>
          </div>
        </div>
      </div>
    </main>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/html2canvas@1.4.1/dist/html2canvas.min.js"></script>
  <script src="script.js"></script>
</body>
</html>

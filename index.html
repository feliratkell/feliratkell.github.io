<!DOCTYPE html>
<html lang="hu">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Felirat látványtervező</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <div id="app">
    <aside class="sidebar">
      <h1 class="app-title">Felirat látványtervező</h1>

      <section class="panel-section">
        <h2>Fal háttér</h2>

        <label class="field-label" for="wall-select">Szín</label>
        <select id="wall-select" class="select">
          <option value="white">Fehér</option>
          <option value="beige">Bézs</option>
          <option value="gray">Szürke</option>
          <option value="green">Zöld</option>
          <option value="pink">Rózsaszín</option>
        </select>

        <div class="hint-text">
          A falak fix képek az assets/backgrounds/ mappából.
        </div>
      </section>

      <section class="panel-section">
        <h2>Nagyítás / zoom</h2>

        <div class="field-row">
          <input id="zoom-range" class="range" type="range" min="1" max="3" step="0.1" value="1" />
          <div class="mini" style="max-width:92px;">
            <div class="mini-label">Zoom</div>
            <div class="mini-value"><span id="zoom-out">1.0</span>×</div>
          </div>
        </div>

        <div class="field-row" style="margin-top:8px;">
          <button id="zoom-reset-btn" class="secondary-btn" type="button">Reset</button>
        </div>

        <div class="hint-text">
          Nagyításkor az <b>üres falon húzva</b> tudsz nézelődni (pan).
        </div>
      </section>

      <section class="panel-section">
        <h2>Kalibráció (komód = 70 cm)</h2>

        <button id="calib-toggle-btn" class="secondary-btn" type="button">
          Kalibrálás indítása
        </button>

        <div class="hint-text">
          Lépés: húzd a <b>felső</b> jelölőt a komód tetejére, az <b>alsót</b> a komód aljára, majd „Mentés”.
          <br />
          Alapesetben nincsenek vonalak / jelölők.
        </div>

        <div class="field-row" style="margin-top:10px;">
          <button id="calib-save-btn" class="primary-btn" type="button" style="margin:0; display:none;">
            Kalibráció mentése
          </button>
          <button id="calib-cancel-btn" class="secondary-btn" type="button" style="display:none;">
            Mégse
          </button>
        </div>

        <div class="mini" style="margin-top:10px;">
          <div class="mini-label">Skála</div>
          <div class="mini-value"><span id="scale-out">—</span> px / cm</div>
        </div>
      </section>

      <section class="panel-section">
        <h2>Anyag</h2>

        <label class="radio-row">
          <input type="radio" name="material" value="birch" checked />
          <span>Natúr nyír rétegelt (4 mm)</span>
        </label>

        <label class="radio-row">
          <input type="radio" name="material" value="hdf" />
          <span>Fehér HDF (3 mm)</span>
        </label>

        <div class="hint-text">
          Felirat = anyag (textúra / fehér), NEM gravír. Ikonok = gravír.
        </div>
      </section>

      <section class="panel-section">
        <h2>Felirat</h2>

        <label class="field-label" for="template-select">Sablonok</label>
        <select id="template-select" class="select">
          <option value="">– válassz sablont –</option>
          <option value="Egyszer volt, hol nem volt …">Egyszer volt, hol nem volt …</option>
          <option value="Kis lépések, nagy csodák">Kis lépések, nagy csodák</option>
          <option value="Álmodj nagyot kisfiam!">Álmodj nagyot kisfiam!</option>
          <option value="Álmodj nagyot kislányom!">Álmodj nagyot kislányom!</option>
        </select>

        <label class="field-label" for="title-input">Szöveg</label>
        <textarea id="title-input" placeholder="Írd ide a feliratot..." rows="2"></textarea>

        <div class="field-row">
          <div class="mini">
            <div class="mini-label">Felirat magasság (valós)</div>
            <div class="mini-value"><span id="title-size">—</span> cm</div>
          </div>
          <button id="center-title-btn" class="secondary-btn" type="button">
            Középre
          </button>
        </div>

        <div class="hint-text">
          A felirat húzható. Fix valós betűméret, Enter nem kicsinyít.
          <br />
          <b>Megjegyzés:</b> A végső gyártáskor az ékezetek és különálló betűrészek egybe lesznek forrasztva, így a felirat egységes darabként készül el.
        </div>
      </section>

      <section class="panel-section">
        <h2>Dekor ikonok</h2>

        <div class="pattern-category collapsed">
          <button class="pattern-category-header" type="button">
            <span>Ludas</span>
            <span class="pattern-category-arrow">▾</span>
          </button>
          <div class="pattern-category-body">
            <div class="pattern-grid">
              <button class="pattern-btn" type="button" data-src="icons/ludas/kis_lud.svg" data-alt="Kis lud">
                <img src="icons/ludas/kis_lud.svg" alt="Kis lud" />
              </button>
              <button class="pattern-btn" type="button" data-src="icons/ludas/nagy_lud.svg" data-alt="Nagy lud">
                <img src="icons/ludas/nagy_lud.svg" alt="Nagy lud" />
              </button>
            </div>
          </div>
        </div>

        <button id="delete-btn" class="secondary-btn" type="button">
          Kijelölt törlése
        </button>

        <div class="hint-text">
          Tipp: Del / Backspace törlés, Ctrl+C / Ctrl+V másolás.
        </div>
      </section>

      <section class="panel-section">
        <h2>Mentés</h2>
        <button id="export-btn" class="primary-btn" type="button">PNG export</button>
        <button id="export-csv-btn" class="secondary-btn" type="button">CSV méretlista</button>
      </section>
    </aside>

    <main class="workspace">
      <div class="workspace-inner">
        <div id="canvas-wrapper">
          <!-- zoom/pan a viewporton történik -->
          <div id="canvas-viewport">
            <div id="canvas">
              <div id="wall-layer"></div>

              <!-- Kalibráció overlay (alapesetben rejtve, exportnál sem látszik) -->
              <div id="calibration-layer" aria-hidden="true">
                <div id="calib-top" class="calib-handle" title="Komód teteje"></div>
                <div id="calib-bottom" class="calib-handle" title="Komód alja"></div>
              </div>

              <div id="items-layer">
                <div id="title-item" class="item title-item" tabindex="0" aria-label="Felirat">
                  <!-- SVG textúra kitöltés: export-stabil -->
                  <svg id="title-svg" class="title-svg" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
                    <defs>
                      <pattern id="title-pattern" patternUnits="objectBoundingBox" width="1" height="1">
                        <image id="title-pattern-image" href="" x="0" y="0" width="1" height="1" preserveAspectRatio="xMidYMid slice"></image>
                      </pattern>
                    </defs>

                    <text id="title-svg-text"
                      x="50%" y="0"
                      text-anchor="middle"
                      dominant-baseline="hanging"
                      xml:space="preserve">Felirat</text>
                  </svg>
                </div>
              </div>
            </div>
          </div>

        </div>
      </div>
    </main>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/html2canvas@1.4.1/dist/html2canvas.min.js"></script>
  <script src="script.js"></script>
</body>
</html>
